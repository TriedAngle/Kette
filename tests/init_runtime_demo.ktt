// expect:
// Reading: core/init.ktt (Size: 9326):
// VM _ModuleOpen: 'Core.
// 
// 54
// incredible
// Module demo start
// 45
// 42
// 3
// 42
// Module demo end
// App

Module open: 'Test::RuntimeDemo.
Module use: 'System.
Module use: 'OS.

(File open: "core/init.ktt" Flags: Posix O_RDONLY Mode: 0) using: [ | file |
    ("Reading: core/init.ktt (Size: " + file size toString + "):") println.
    file
        eachLine: [ | line |
            line println
        ]
        First: 2
].

NewGlobal := None.
(VM _Eval: "NewGlobal = \"incredible\". 10 + 44") toString println.
NewGlobal println.

"Module demo start" println.

Module open: 'Core::Math.
pi := 3.
answer := 42.
Module export: 'pi.
Module export: 'answer.

Module open: 'App.
Module use: 'Core::Math.
(pi + answer) toString println.

Module use: 'Core::Math As: { answer = 'mathAnswer }.
mathAnswer toString println.

Module open: 'Core::Math.
Module open: 'App.
pi toString println.

((Module at: 'Core::Math) answer) toString println.

"Module demo end" println.

Module current toString println.
